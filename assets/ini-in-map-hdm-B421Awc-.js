import{_ as c}from"./ValaxyMain.vue_vue_type_style_index_0_lang-ClDu1Ntj.js";import{k as u,l as k,o as g,w as a,m as n,a as l,d as s,j as m,p as h}from"./app-CjrUvp9y.js";import"./YunCloud-Csf50OwO.js";import"./tags-BchB4_tI.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-CbNh4SyL.js";import"./YunCard.vue_vue_type_script_setup_true_lang-zOI1qsDI.js";import"./YunPostMeta.vue_vue_type_style_index_0_lang-CsJM4mWi.js";import"./index-C2WUO9Ih.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-DFGiOmuj.js";import"./post-Dnmkh9iV.js";const b="/assets/ini-1-CGCaHxzB.png",N={__name:"ini-in-map-hdm",setup(y,{expose:o}){const e=JSON.parse('{"title":"地图 INI 简介","description":"","frontmatter":{"title":"地图 INI 简介","date":"2025-02-11","updated":"2025-02-21","categories":"自定义游戏资源","tags":["进阶"],"author":"Handama","sponsor":false},"headers":[{"level":2,"title":"1     注册表小节","slug":"_1-注册表小节","link":"#_1-注册表小节","children":[{"level":3,"title":"1.1  漂移与重复","slug":"_1-1-漂移与重复","link":"#_1-1-漂移与重复","children":[]},{"level":3,"title":"1.2  输出真实注册表","slug":"_1-2-输出真实注册表","link":"#_1-2-输出真实注册表","children":[]},{"level":3,"title":"1.3  特殊注册表","slug":"_1-3-特殊注册表","link":"#_1-3-特殊注册表","children":[]}]},{"level":2,"title":"2     ini 覆盖","slug":"_2-ini-覆盖","link":"#_2-ini-覆盖","children":[{"level":3,"title":"2.1  不完整覆盖 bug","slug":"_2-1-不完整覆盖-bug","link":"#_2-1-不完整覆盖-bug","children":[]},{"level":3,"title":"2.2  注册表小节","slug":"_2-2-注册表小节","link":"#_2-2-注册表小节","children":[]},{"level":3,"title":"2.3  Image 图像覆盖","slug":"_2-3-image-图像覆盖","link":"#_2-3-image-图像覆盖","children":[]},{"level":3,"title":"2.4  特殊 INI 小节","slug":"_2-4-特殊-ini-小节","link":"#_2-4-特殊-ini-小节","children":[]}]},{"level":2,"title":"3     杂项内容","slug":"_3-杂项内容","link":"#_3-杂项内容","children":[]}],"relativePath":"pages/posts/ini-in-map-hdm.md","path":"C:/code/web/valaxy-blog/pages/posts/ini-in-map-hdm.md","lastUpdated":null}'),r=u(),t=e.frontmatter||{};return r.meta.frontmatter=Object.assign(r.meta.frontmatter||{},e.frontmatter||{}),h("pageData",e),h("valaxy:frontmatter",t),globalThis.$frontmatter=t,o({frontmatter:{title:"地图 INI 简介",date:"2025-02-11",updated:"2025-02-21",categories:"自定义游戏资源",tags:["进阶"],author:"Handama",sponsor:!1}}),(i,p)=>{const d=c;return g(),k(d,{frontmatter:m(t)},{"main-content-md":a(()=>p[0]||(p[0]=[l("blockquote",null,[l("p",null,"RA2MAP：本文转载自 FA2SP HDM Edition 地编内教程附件"),l("p",null,"文章包括：")],-1),l("div",{class:"language- vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"}),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",null,"1注册表小节")]),s(`
`),l("span",{class:"line"},[l("span",null,"1.1漂移与重复")]),s(`
`),l("span",{class:"line"},[l("span",null,"1.2输出真实注册表")]),s(`
`),l("span",{class:"line"},[l("span",null,"1.3特殊注册表")]),s(`
`),l("span",{class:"line"},[l("span",null,"2ini覆盖")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.1不完整覆盖bug")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.1.1光棱塔秒杀")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.1.2导弹三星弹头")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.1.3步兵pip漂移")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.1.4鲍里斯空袭")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.1.5杂项")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.2注册表小节")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.2.1[Countries] 国家")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.3Image图像覆盖")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.4特殊INI小节")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.4.1AI相关小节")]),s(`
`),l("span",{class:"line"},[l("span",null,"2.4.2[VariableNames]变量")]),s(`
`),l("span",{class:"line"},[l("span",null,"3杂项内容")])])]),l("button",{class:"collapse"})],-1),l("p",null,[s("本文将简述地图 ini 与 rulesmd.ini 的合并关系与常见问题。本作品采用"),l("a",{href:"http://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",rel:"noreferrer"},"知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议"),s("进行许可，转载请注明作者。")],-1),l("p",null,"作者：Handama",-1),l("p",null,"最后修订：2025.1.26",-1),l("p",null,"红警地图，无论其拓展名如何，本质上都是一个ini文件，由多个小节和小节下的键值对组成。",-1),l("div",{class:"language-ini vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"ini"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[小节(section)]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"键(key)=值(value)")])])]),l("button",{class:"collapse"})],-1),l("p",null,"因此，它也遵守绝大多数红警一般ini的规则。",-1),l("h2",{id:"_1-注册表小节",tabindex:"-1"},[s("1     注册表小节 "),l("a",{class:"header-anchor",href:"#_1-注册表小节","aria-label":'Permalink to "1     注册表小节"'},"​")],-1),l("p",null,"INI分为两种小节：注册表小节和一般小节。在注册表小节中，ini的键除了互相区分外，没有任何意义。游戏自上而下读取注册表小节，并将值放入对应的游戏内注册表中。注册表小节主要有：",-1),l("div",{class:"language-ini vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"ini"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Rules注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[AircraftTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Animations]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[BuildingTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Countries]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[InfantryTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[OverlayTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Particles]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[ParticleSystems]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[SmudgeTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[SuperWeaponTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[TerrainTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[VehicleTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[VoxelAnims]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Warheads]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"AI注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[TaskForces]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[TeamTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[ScriptTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Art注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Movies]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Sound注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[SoundList]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"EVA注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[DialogList]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"Theme注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Themes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"地图注册表：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Aircraft]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Houses]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Infantry]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Structures]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Units]")]),s(`
`),l("span",{class:"line"}),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"特殊：")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[WeaponTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[Projectiles]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[VariableNames]")])])]),l("button",{class:"collapse"})],-1),l("p",null,"由于注册表小节的键没有实际意义，因此也可以是除了数字外的其他文本。但一般建议与游戏内索引相对应，即从0开始，并且不间断不重复。",-1),l("h3",{id:"_1-1-漂移与重复",tabindex:"-1"},[s("1.1  漂移与重复 "),l("a",{class:"header-anchor",href:"#_1-1-漂移与重复","aria-label":'Permalink to "1.1  漂移与重复"'},"​")],-1),l("p",null,[s("许多脚本、事件、行为，参数所填的索引都是"),l("strong",null,"游戏内注册表的索引"),s("，而不是ini中的键。游戏内注册表为从0开始不中断的列表，因此往往会与ini键对应不上，称为"),l("strong",null,"注册表漂移"),s("。当ini注册表中的值产生重复时，会以第一次出现的为准，后面的重复值不会重复注册。例如在尤复rules中：")],-1),l("div",{class:"language-ini vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"ini"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [BuildingTypes]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 185"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"=NAPSYA")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 241"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"=NAPSYA")])])]),l("button",{class:"collapse"})],-1),l("p",null,[l("code",null,"NAPSYA"),s("的真实注册表索引为184。")],-1),l("h3",{id:"_1-2-输出真实注册表",tabindex:"-1"},[s("1.2  输出真实注册表 "),l("a",{class:"header-anchor",href:"#_1-2-输出真实注册表","aria-label":'Permalink to "1.2  输出真实注册表"'},"​")],-1),l("p",null,[s("大部分注册表索引可以通过ares的转储类型(Type Data Dumping)功能输出，在"),l("code",null,"键盘-发展"),s("中为这个功能设置快捷键，然后在游戏中按下即可。对应内容会输出到"),l("code",null,"debug.log"),s("中（需要在启动参数中添加"),l("code",null,"-LOG"),s("）。")],-1),l("h3",{id:"_1-3-特殊注册表",tabindex:"-1"},[s("1.3  特殊注册表 "),l("a",{class:"header-anchor",href:"#_1-3-特殊注册表","aria-label":'Permalink to "1.3  特殊注册表"'},"​")],-1),l("p",null,[l("code",null,"[WeaponTypes]与[Projectiles]"),s("并不存在于尤复rules中，而是游戏内置注册表。在解析单位时，游戏会自动将单位的武器和抛射体添加进这两个注册表中。因此，光棱坦克的溅射武器才需要挂载到"),l("code",null,"XCOMET"),s("下。行为42“武器(弹头)爆炸在…”使用的就是"),l("code",null,"[WeaponTypes]"),s("。Ares环境下可以直接查阅转储类型的输出，或者直接在rules中添加这个注册表；而在原版环境中，由于武器注册顺序与ares可能有差别，一部分序号并不能对应上。因此，不建议在原版环境中使用本行为。")],-1),l("p",null,[s("地图注册表"),l("code",null,"[Houses]"),s("存储所属方信息，"),l("code",null,"[Aircraft]"),s("等其余四个存储摆在地图上的各种单位信息。尤复所有与国家、所属方有关的触发、脚本均使用"),l("code",null,"[Countries]"),s("注册表。多个所属方可以共用一个国家，但在执行有关触发、脚本时会报错，不推荐使用。")],-1),l("p",null,[l("code",null,"[VariableNames]"),s("虽然形式上也是从0开始的索引，但并不是注册表，而是一个特殊的“名字”（键）。在rules中，游戏只会读取键为"),l("code",null,"0~49"),s("的全局变量，在地图中，则只会读取键为"),l("code",null,"0~99"),s("的局部变量，超出这个范围的变量不会被计入，并且值恒为1。例如：")],-1),l("div",{class:"language-ini vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"ini"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[VariableNames]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"0"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"=变量0,0")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"1"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"=变量1,0")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"3"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"=变量3,0")])])]),l("button",{class:"collapse"})],-1),l("p",null,"在这个例子中，事件37“局部变量被清除”的参数若填2，则会被触发，因为游戏找不到ini键为“2”的变量，而未定义局部变量的默认值为0。",-1),l("p",null,[s("Phobos增加了两个注册表："),l("code",null,"[AITargetTypes]与[AIScriptsList]"),s("，主要用于新增的脚本中。这两个注册表也遵循一般规则。")],-1),l("h2",{id:"_2-ini-覆盖",tabindex:"-1"},[s("2     ini 覆盖 "),l("a",{class:"header-anchor",href:"#_2-ini-覆盖","aria-label":'Permalink to "2     ini 覆盖"'},"​")],-1),l("p",null,"地图中的INI小节会覆盖rules中对应的内容。例如，通过添加：",-1),l("div",{class:"language-ini vp-adaptive-theme"},[l("button",{title:"Copy Code",class:"copy"}),l("span",{class:"lang"},"ini"),l("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[l("code",{"v-pre":""},[l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"[HTNK]")]),s(`
`),l("span",{class:"line"},[l("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"Strength"),l("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"=1000")])])]),l("button",{class:"collapse"})],-1),l("p",null,"即可以让犀牛坦克的血量变为1000，而其他未被修改的属性不会改变。但是，某些小节会产生bug或特殊现象：",-1),l("h3",{id:"_2-1-不完整覆盖-bug",tabindex:"-1"},[s("2.1  不完整覆盖 bug "),l("a",{class:"header-anchor",href:"#_2-1-不完整覆盖-bug","aria-label":'Permalink to "2.1  不完整覆盖 bug"'},"​")],-1),l("p",null,[s("本小节内容只在原版尤复下进行测试，"),l("strong",null,"拓展平台可能修复了部分bug"),s("。")],-1),l("h4",{id:"_2-1-1-光棱塔秒杀",tabindex:"-1"},[s("2.1.1   光棱塔秒杀 "),l("a",{class:"header-anchor",href:"#_2-1-1-光棱塔秒杀","aria-label":'Permalink to "2.1.1   光棱塔秒杀"'},"​")],-1),l("p",null,"可见于官方图“埃及之旅”中，两个光棱塔串联后，伤害足以秒杀尤复中的所有单位。",-1),l("p",null,[s("原因：这张图覆盖了"),l("code",null,"[General]"),s("的部分内容（修改了幻影坦克的伪装树木），但是没有重新定义"),l("code",null,"PrismSupportModifier="),s("，产生的原理可以参考"),l("a",{href:"https://modenc.renegadeprojects.com/PrismSupportModifier",target:"_blank",rel:"noreferrer"},"modenc"),s("。")],-1),l("h4",{id:"_2-1-2-导弹三星弹头",tabindex:"-1"},[s("2.1.2   导弹三星弹头 "),l("a",{class:"header-anchor",href:"#_2-1-2-导弹三星弹头","aria-label":'Permalink to "2.1.2   导弹三星弹头"'},"​")],-1),l("p",null,[s("在覆盖"),l("code",null,"[CombatDamage]"),s("时，如果没有重新定义导弹的三星弹头，包括"),l("code",null,"V3EliteWarhead=、DMislEliteWarhead=和CrushWarhead="),s("，会导致他们的三星弹头变为初始弹头。")],-1),l("h4",{id:"_2-1-3-步兵pip漂移",tabindex:"-1"},[s("2.1.3   步兵pip漂移 "),l("a",{class:"header-anchor",href:"#_2-1-3-步兵pip漂移","aria-label":'Permalink to "2.1.3   步兵pip漂移"'},"​")],-1),l("p",null,[s("在覆盖任何步兵小节时，如果没有重新定义"),l("code",null,"Pip=和OccupyPip="),s("，就会导致pip漂移，如下图右侧：")],-1),l("figure",null,[l("img",{src:b,alt:"",loading:"lazy",decoding:"async"})],-1),l("h4",{id:"_2-1-4-鲍里斯空袭",tabindex:"-1"},[s("2.1.4   鲍里斯空袭 "),l("a",{class:"header-anchor",href:"#_2-1-4-鲍里斯空袭","aria-label":'Permalink to "2.1.4   鲍里斯空袭"'},"​")],-1),l("p",null,[s("在覆盖有空袭逻辑的步兵小节时，如果没有重新定义"),l("code",null,"EliteAirstrikeTeam="),s("，则三星空袭飞机数量仍然为初始数量。")],-1),l("h4",{id:"_2-1-5-杂项",tabindex:"-1"},[s("2.1.5   杂项 "),l("a",{class:"header-anchor",href:"#_2-1-5-杂项","aria-label":'Permalink to "2.1.5   杂项"'},"​")],-1),l("p",null,[s("修改全局的粒子系统（如"),l("code",null,"[SmallGreySSys]"),s("）或地形类型（如"),l("code",null,"[Water]"),s("）时，也需要在地图中全部重新定义，否则无法正常工作。")],-1),l("p",null,"以上总结可能并不全，因此建议在覆盖小节，特别是全局ini小节时，尽量复制rules中的全部内容，以避免同类bug。",-1),l("h3",{id:"_2-2-注册表小节",tabindex:"-1"},[s("2.2  注册表小节 "),l("a",{class:"header-anchor",href:"#_2-2-注册表小节","aria-label":'Permalink to "2.2  注册表小节"'},"​")],-1),l("p",null,"与普通小节不同，注册表小节并不会覆盖相同键的内容，而是会将地图ini中的值按顺序添加全局注册表最后。因此，地图注册表小节的键可以与全局重复。如下注册表，通过ares转储输出后可以看到：",-1),l("table",null,[l("thead",null,[l("tr",null,[l("th"),l("th")])]),l("tbody",null,[l("tr",null,[l("td",null,[s("地图ini："),l("br"),s("[BuildingTypes]"),l("br"),s("0=TESTB1"),l("br"),s("1=TESTB2"),l("br"),s("2=TESTB3")]),l("td",null,[s("Ares输出："),l("br"),s("……"),l("br"),s("401=CALUNR02"),l("br"),s("402=TESTB1"),l("br"),s("403=TESTB2"),l("br"),s("404=TESTB3")])])])],-1),l("p",null,[s("需要注意的是，部分全局注册表小节中的内容并不是完整内容，除了注册表外，游戏还会通过其他途径为对象进行注册，并将其添加至游戏内注册表中。例如，使用ares输出"),l("code",null,"[Animations]"),s("可以看到：")],-1),l("table",null,[l("thead",null,[l("tr",null,[l("th"),l("th")])]),l("tbody",null,[l("tr",null,[l("td",null,[s("Rules注册表："),l("br"),s("[Animations]"),l("br"),s("……"),l("br"),s("1069=NANRCT_PD"),l("br"),s("1070=YAPOWR_BD"),l("br"),s("1071=YAPOWR_CD")]),l("td",null,[s("Ares输出："),l("br"),s("……"),l("br"),s("606=YAPOWR_CD"),l("br"),s("607=D"),l("br"),s("608=SMOKEY2"),l("br"),s("609=gtpowexp"),l("br"),s("610=tstlexp"),l("br"),s("611=CAWA15DM"),l("br"),s("612=CACH06DM"),l("br"),s("613=BBBLELRG"),l("br"),s("614=MINDANIMR")])])])],-1),l("p",null,"在ares环境中，地图ini中新注册的动画实际从615开始（而在尤复环境中，甚至是从621开始！）。因此，建议所有注册表都在rules中注册，以免在使用时无法确定正确的索引。",-1),l("h4",{id:"_2-2-1-countries-国家",tabindex:"-1"},[s("2.2.1   [Countries] 国家 "),l("a",{class:"header-anchor",href:"#_2-2-1-countries-国家","aria-label":'Permalink to "2.2.1   [Countries] 国家"'},"​")],-1),l("p",null,[s("同其余注册表小节一样，地图的"),l("code",null,"[Countries]"),s("也与全局注册表合并。在尤复中，全局国家有14个，因此新建国家的索引从14开始。由于地编的特性，只有注册在地图"),l("code",null,"[Countries]"),s("中的国家才能被正常引用（只是地编显示问题）。如果同时也使用了全局国家，如"),l("code",null,"Neutral"),s("，由于1.1提到的原理，他们的索引仍为原本的全局索引号。下面是两个例子：")],-1),l("table",null,[l("thead",null,[l("tr",null,[l("th"),l("th")])]),l("tbody",null,[l("tr",null,[l("td",null,[s("[Countries]          ;索引号"),l("br"),s("0=Player             ;14"),l("br"),s("1=Neutral            ;"),l("strong",null,"12"),l("br"),s("2=GoodLeft1       ;15"),l("br"),s("3=GoodMid1       ;16")]),l("td",null,[s("[Countries]          ;索引号"),l("br"),s("9=YuriCountry     ;9"),l("br"),s("10=GoodGuy1     ;"),l("strong",null,"14"),l("br"),s("12=Neutral          ;12"),l("br"),s("13=Special           ;13")])])])],-1),l("p",null,"左侧的例子是不使用标准所属方时常见的情况，而右侧则是使用标准所属方后又新增国家的情况。",-1),l("h3",{id:"_2-3-image-图像覆盖",tabindex:"-1"},[s("2.3  Image 图像覆盖 "),l("a",{class:"header-anchor",href:"#_2-3-image-图像覆盖","aria-label":'Permalink to "2.3  Image 图像覆盖"'},"​")],-1),l("p",null,[s("在地图中重设"),l("code",null,"Image="),s("时，游戏将新的Image定义的Art小节覆盖已有的Art小节，但是并不能修改原有的"),l("code",null,"Cameo=、AltCameo=与Foundation="),s("。此外，如果原Art中定义了某个"),l("code",null,"ActiveAnim"),s("，但在新的Art小节中并未重新定义，则仍会保留原有的"),l("code",null,"ActiveAnim"),s("。")],-1),l("h3",{id:"_2-4-特殊-ini-小节",tabindex:"-1"},[s("2.4  特殊 INI 小节 "),l("a",{class:"header-anchor",href:"#_2-4-特殊-ini-小节","aria-label":'Permalink to "2.4  特殊 INI 小节"'},"​")],-1),l("p",null,"地图INI中的某些特殊小节，并不会覆盖rules中的对应内容。",-1),l("h4",{id:"_2-4-1-ai-相关小节",tabindex:"-1"},[s("2.4.1   AI 相关小节 "),l("a",{class:"header-anchor",href:"#_2-4-1-ai-相关小节","aria-label":'Permalink to "2.4.1   AI 相关小节"'},"​")],-1),l("p",null,[s("AI注册表"),l("code",null,"[TaskForces]、[TeamTypes]、[ScriptTypes]、[AITriggerTypes]"),s("会被合并到AI中。脚本行为18 - 更改小队所使用的索引，是包含ai中"),l("code",null,"[TeamTypes]"),s("的合并索引。地图中的小队可以直接引用全局AI中的特遣和脚本，地图中的AI触发可以直接引用全局AI中的小队。特遣、小队、脚本小节并不遵循合并规则，而是直接替换。如果你想修改全局特遣、小队、脚本的内容，需要在地图对应注册表中注册，并在地图中写入"),l("strong",null,"完整"),s("的小节（本质上是引用了地图ini中的小节，忽略了AI中的）。")],-1),l("h4",{id:"_2-4-2-variablenames-变量",tabindex:"-1"},[s("2.4.2   [VariableNames]变量 "),l("a",{class:"header-anchor",href:"#_2-4-2-variablenames-变量","aria-label":'Permalink to "2.4.2   [VariableNames]变量"'},"​")],-1),l("p",null,[l("code",null,"[VariableNames]"),s("并不是注册表小节。在rules中添加的为全局变量，在地图ini中添加的为局部变量，并且他们的格式也不相同。")],-1),l("h2",{id:"_3-杂项内容",tabindex:"-1"},[s("3     杂项内容 "),l("a",{class:"header-anchor",href:"#_3-杂项内容","aria-label":'Permalink to "3     杂项内容"'},"​")],-1),l("p",null,[s("地图ini支持ares的"),l("code",null,"include"),s("和冒号继承，注册表小节支持"),l("code",null,"+="),s("注册，但为了地编的兼容性，不推荐在地图中这样做。")],-1),l("p",null,[s("Ini键值对的总长有限制。在尤复平台中，除了"),l("code",null,"[Actions]、[Events]和[AITriggerTypes]"),s("以外的小节，键值对最大长度均为128，而前面三个小节为512。超出长度的内容会被忽略掉，因此可能会产生意外情况。Ares将所有小节的限制均拓展至512。")],-1),l("p",null,"如果ini小节名出现重复，游戏仅会读取第一次出现的小节。但是FA2会读取第二个，并且保存后也仅会保存第二个。小节中出现重复键时，尤复中会读取第一个值，FA2和ares平台会读取第二个值。",-1)])),"main-header":a(()=>[n(i.$slots,"main-header")]),"main-header-after":a(()=>[n(i.$slots,"main-header-after")]),"main-nav":a(()=>[n(i.$slots,"main-nav")]),"main-content":a(()=>[n(i.$slots,"main-content")]),"main-content-after":a(()=>[n(i.$slots,"main-content-after")]),"main-nav-before":a(()=>[n(i.$slots,"main-nav-before")]),"main-nav-after":a(()=>[n(i.$slots,"main-nav-after")]),comment:a(()=>[n(i.$slots,"comment")]),footer:a(()=>[n(i.$slots,"footer")]),aside:a(()=>[n(i.$slots,"aside")]),"aside-custom":a(()=>[n(i.$slots,"aside-custom")]),default:a(()=>[n(i.$slots,"default")]),_:3},8,["frontmatter"])}}};export{N as default};
